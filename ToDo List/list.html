<!DOCTYPE html>
<html>
<head>
    <title>To Do List</title>
</head>
<body>
    <h1>To-Do List</h1>

    <input type="text" placeholder="Enter task" id="task"/>
    <button onclick="addTask()">Add Task</button>

    <ul id="taskList"></ul>

    <script>
        // Load tasks when page loads
        window.onload = loadTasks;

        function addTask() {
            const taskText = document.getElementById('task').value.trim();
            if (taskText === '') return;

            addTaskToUI(taskText);
            saveTask(taskText);
            document.getElementById('task').value = '';
        }

        // Add task to UI
        function addTaskToUI(taskText) {
            const li = document.createElement('li');

            const span = document.createElement('span');
            span.textContent = taskText;

            const editBtn = document.createElement('button');
            editBtn.textContent = 'Edit';
            editBtn.onclick = function () {
                const newTask = prompt("Edit task:", span.textContent);
                if (newTask && newTask.trim() !== "") {
                    updateTask(span.textContent, newTask.trim());
                    span.textContent = newTask.trim();
                }
            };

            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.onclick = function () {
                deleteTask(span.textContent);
                li.remove();
            };

            li.appendChild(span);
            li.appendChild(editBtn);
            li.appendChild(deleteBtn);

            document.getElementById('taskList').appendChild(li);
        }

        // Save task to localStorage
        function saveTask(task) {
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            tasks.push(task);
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Delete task from localStorage
        function deleteTask(taskToDelete) {
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            tasks = tasks.filter(t => t !== taskToDelete);
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Update task in localStorage
        function updateTask(oldTask, newTask) {
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            const index = tasks.indexOf(oldTask);
            if (index !== -1) {
                tasks[index] = newTask;
            }
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Load tasks from localStorage
        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            tasks.forEach(task => addTaskToUI(task));
        }
    </script>

</body>
</html>
